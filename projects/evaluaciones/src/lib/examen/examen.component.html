<mat-vertical-stepper linear #stepper>

  <mat-step [stepControl]="examFormGroup">
    <ng-template matStepLabel>Crear examen</ng-template><br>
    <form [formGroup]="examFormGroup" class="formGroup">
      <mat-form-field class="textareaF" appearance="outline">
        <mat-label>Descripción</mat-label>
        <textarea matInput placeholder="Descripción" formControlName="descriptionCtrl"></textarea>
      </mat-form-field>
      <br>
      <mat-form-field class="formField" appearance="outline">
        <mat-label>Nota máxima</mat-label>
        <input matInput formControlName="noteCtrl" type="number" min="3" max="5">
      </mat-form-field>
    </form>
    <mat-divider></mat-divider>
    <div class="buttonsStep">
      <button mat-button matStepperNext>Siguiente</button>
    </div>
  </mat-step>

  <mat-step [stepControl]="questionFormGroup">
    <ng-template matStepLabel>Agregar preguntas</ng-template><br>
    <form [formGroup]="questionFormGroup" class="formGroup">
      <div formArrayName="questions"
        *ngFor="let question of questionFormGroup['controls'].questions['controls']; let i = index">
        <div [formGroupName]="i">
          <mat-card>
            <mat-card-header>
              <mat-card-subtitle>Pregunta {{i + 1}}</mat-card-subtitle>
            </mat-card-header>
            <mat-form-field class="formField" appearance="outline">
              <mat-label>Descripción</mat-label>
              <input matInput formControlName="descriptionQCtrl" placeholder="Descripción" required>
            </mat-form-field>

            <mat-form-field class="formField" appearance="outline">
              <mat-label>Imagen</mat-label>
              <input matInput formControlName="imageCtrl" placeholder="Imagen">
            </mat-form-field>

            <mat-form-field class="formField" appearance="outline">
              <mat-label>Valoración</mat-label>
              <input matInput formControlName="assessmentCtrl" placeholder="Valoración" required>
            </mat-form-field>

            <mat-form-field class="formField" appearance="outline">
              <mat-label>Tipo de respuesta</mat-label>
              <mat-select formControlName="typesCtrl">
                <mat-option *ngFor="let item of tipos" [value]="item.id">
                  {{item.responseTypeName}}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <div *ngIf="questions.value[i].typesCtrl === 1">
              <lib-tipo-uno formControlName></lib-tipo-uno>
            </div>
            <div *ngIf="questions.value[i].typesCtrl === 2">
              <lib-tipo-dos></lib-tipo-dos>
            </div>
          </mat-card>
        </div>
        <mat-divider></mat-divider>
      </div>
      <div class="buttonsStep">
        <button mat-button (click)="addQuestion()">
          <mat-icon aria-hidden="false" aria-label="Example home icon">add</mat-icon>Agregar
        </button>
        <button mat-button (click)="removeQuestion()">
          <mat-icon aria-hidden="false" aria-label="Example home icon">remove</mat-icon>Eliminar
        </button>
      </div>
    </form>
    <mat-divider></mat-divider>
    <div class="buttonsStep">
      <button mat-button matStepperPrevious>Atrás</button>
      <button mat-button matStepperNext>Siguiente</button>
    </div>
  </mat-step>


  <mat-step>
    <ng-template matStepLabel>Listo</ng-template>
    <p>You are now done.</p>
    <div class="buttonsStep">
      <button mat-button matStepperPrevious>Atrás</button>
      <button mat-button (click)="stepper.reset()">Restaurar</button>
    </div>
  </mat-step>
</mat-vertical-stepper>
